<UserControl x:Class="TabPaint.Controls.StatusBarControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:TabPaint.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="30" d:DesignWidth="1000">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Resources/Styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <StatusBar Background="#44FFFFFF" Padding="0">
        <!-- 鼠标位置 -->
        <StatusBarItem Width="130" Margin="8,0">
            <StackPanel Orientation="Horizontal">
                <Image Source="{StaticResource Cursor_Image}" Style="{StaticResource StatusIconStyle}"/>
                <TextBlock Text="{Binding MousePosition}" VerticalAlignment="Center" FontSize="11"/>
            </StackPanel>
        </StatusBarItem>
        <Separator Width="1" Height="14" Margin="2,0" Background="#20000000" VerticalAlignment="Center"/>

        <!-- 图片尺寸 -->
        <StatusBarItem Width="130" Margin="8,0">
            <StackPanel Orientation="Horizontal">
                <Image Source="{StaticResource Picture_Image}" Style="{StaticResource StatusIconStyle}"/>
                <TextBlock Text="{Binding ImageSize}" VerticalAlignment="Center" FontSize="11"/>
            </StackPanel>
        </StatusBarItem>
        <Separator Width="1" Height="14" Margin="2,0" Background="#20000000" VerticalAlignment="Center"/>

        <!-- 选区尺寸 -->
        <StatusBarItem Width="130" Margin="8,0">
            <StackPanel Orientation="Horizontal">
                <Image Source="{StaticResource Select_Image}" Style="{StaticResource StatusIconStyle}"/>
                <TextBlock Text="{Binding SelectionSize}" VerticalAlignment="Center" FontSize="11"/>
            </StackPanel>
        </StatusBarItem>
        <Separator Width="1" Height="14" Margin="2,0" Background="#20000000" VerticalAlignment="Center"/>

        <!-- 占位符 -->
        <StatusBarItem>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
            </Grid>
        </StatusBarItem>

        <!-- 右侧控制区 -->
        <StatusBarItem HorizontalAlignment="Right">
            <StackPanel Orientation="Horizontal">
                <!-- 剪切板监听开关 -->
                <ToggleButton HorizontalAlignment="Right" x:Name="ClipboardMonitorToggle" 
                              Width="24" Height="24" 
                              Margin="2,0" Padding="0"
                              ToolTip="监听剪切板 (自动粘贴新图片)"
                              Style="{StaticResource RoundedMenuToggleButtonStyle}"
                              Click="OnClipboardMonitorToggleClick">
                    <Grid>
                        <Image Source="{StaticResource ClipBoard_Image}" Width="16" Height="16" Opacity="0.8"/>
                    </Grid>
                </ToggleButton>

                <!-- 信息按钮 -->
                <Button Width="24" Height="24" 
                        Style="{StaticResource RoundedMenuButtonStyle}" 
                        Padding="2,0" 
                        Cursor="Help">
                    <Button.ToolTip>
                        <ToolTip Background="#F3F3F3" BorderBrush="#CCCCCC" HasDropShadow="True">
                            <StackPanel Margin="5">
                                <TextBlock Text="图片详细信息" FontWeight="Bold" Margin="0,0,0,5"/>
                                <Separator Background="#DDD"/>
                                <TextBlock Text="{Binding CurrentImageFullInfo}" FontFamily="Consolas" FontSize="11"/>
                            </StackPanel>
                        </ToolTip>
                    </Button.ToolTip>
                    <Image Source="{StaticResource Info_Image}" Width="16" Height="16" Opacity="0.8"/>
                </Button>

                <!-- 适应窗口按钮 -->
                <Button Width="24" Height="24" ToolTip="适应窗口大小" Margin="6,0" Padding="2,0" Style="{StaticResource RoundedMenuButtonStyle}" Click="OnFitToWindowClick">
                    <Image Source="{StaticResource FitToWindow_Image}" Width="16" Height="16"/>
                </Button>

                <!-- 缩放下拉框 -->
                <ComboBox x:Name="ZoomMenu" Margin="0,0,6,0" Width="80" SelectionChanged="OnZoomMenuSelectionChanged" IsEditable="True">
                    <ComboBoxItem Content="25%" Tag="0.25"/>
                    <ComboBoxItem Content="50%" Tag="0.5"/>
                    <ComboBoxItem Content="75%" Tag="0.75"/>
                    <ComboBoxItem Content="100%" Tag="1.0"/>
                    <ComboBoxItem Content="125%" Tag="1.25"/>
                    <ComboBoxItem Content="150%" Tag="1.5"/>
                    <ComboBoxItem Content="200%" Tag="2.0"/>
                    <ComboBoxItem Content="400%" Tag="4.0"/>
                    <ComboBoxItem Content="600%" Tag="6.0"/>
                    <ComboBoxItem Content="800%" Tag="8.0"/>
                </ComboBox>

                <!-- 缩小按钮 -->
                <Button Width="24" Height="24" ToolTip="缩小" Style="{StaticResource RoundedMenuButtonStyle}" Click="OnZoomOutClick" Padding="2,0">
                    <Image Source="{StaticResource Zoom_Out_Image}" Width="16" Height="16"/>
                </Button>

                <!-- 缩放滑块 -->
                <Slider Name="ZoomSlider" Minimum="0.1" Maximum="8.0" Value="{Binding ZoomScale, Mode=TwoWay}" Width="120" TickFrequency="0.1" SmallChange="0.1" IsSnapToTickEnabled="True"/>

                <!-- 放大按钮 -->
                <Button Width="24" Height="24" ToolTip="放大" Style="{StaticResource RoundedMenuButtonStyle}" Click="OnZoomInClick" Padding="2,0">
                    <Image Source="{StaticResource Zoom_In_Image}" Width="16" Height="16"/>
                </Button>
            </StackPanel>
        </StatusBarItem>
    </StatusBar>
</UserControl>
